(this["webpackJsonpreact-trello"]=this["webpackJsonpreact-trello"]||[]).push([[0],{32:function(e,t,a){e.exports=a(51)},38:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(30),o=a.n(c),s=a(1),l=a.n(s),i=a(9),u=a(24),d=a(7),p=a(3),f=a(4),m=a(6),b=a(5),h=(a(38),a(21)),v=a.n(h);a(39);v.a.initializeApp({apiKey:"AIzaSyAFyaOi_tk69xFzURmdBNpNbSq00_t3zVw",authDomain:"react-trello-9a49c.firebaseapp.com",databaseURL:"https://react-trello-9a49c.firebaseio.com",projectId:"react-trello-9a49c",storageBucket:"react-trello-9a49c.appspot.com",messagingSenderId:"728388101690",appId:"1:728388101690:web:9f90494954a42a5fa5f703",measurementId:"G-H1GEGTP910"});var E=v.a.firestore(),g=E.collection("boards"),y=E.collection("lists"),w=E.collection("cards"),k=a(16),O=a.n(k),j=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={availableLabels:["#80ccff","#80ffaa","#f94a1e","#ffb3ff","#bf00ff","#ffad33"],selectedLabels:[]},e.textInput=n.a.createRef(),e.updateCard=function(){var t=Object(d.a)(l.a.mark((function t(a){var r,n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.preventDefault(),r=e.props.cardData.id,n=e.textInput.current.value,c=e.state.selectedLabels,t.next=7,w.doc(r);case 7:t.sent.update({"card.text":n,"card.labels":c}),e.props.toggleModal(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("Error updating cards: ",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),e.setLabel=function(t){var a=Object(i.a)(e.state.selectedLabels);if(a.includes(t)){var r=a.filter((function(e){return e!==t}));e.setState({selectedLabels:r})}else a.push(t),e.setState({selectedLabels:a})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.setState({selectedLabels:this.props.cardData.labels})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"modal-wrapper",style:{display:this.props.modalOpen?"block":"none"}},n.a.createElement("div",{className:"modal-body"},n.a.createElement("form",{onSubmit:this.updateCard},n.a.createElement("div",null,n.a.createElement("span",{className:"modal-close",onClick:this.props.toggleModal},"\xd7"),n.a.createElement("p",{className:"label-title"},"add / remove labels"),this.state.availableLabels.map((function(t){return n.a.createElement("span",{key:t,onClick:function(){return e.setLabel(t)},className:"label",style:{background:t}})})),n.a.createElement("hr",null)),n.a.createElement("div",{className:"edit-area"},n.a.createElement("span",{className:"edit-icon"},"\u270e"),n.a.createElement(O.a,{className:"textbox-edit",defaultValue:this.props.cardData.text,ref:this.textInput})),n.a.createElement("div",null,n.a.createElement("p",{className:"label-title"},"labels:"),this.state.selectedLabels.map((function(e){return n.a.createElement("span",{className:"label",style:{background:e},key:e})}))),n.a.createElement("button",{className:"submit"},"Save changes"))))}}]),a}(n.a.Component),x=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={modalOpen:!1},e.toggleModal=function(){e.setState({modalOpen:!e.state.modalOpen})},e.deleteCard=function(){var t=Object(d.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.preventDefault(),r=e.props.data.id,t.next=5,w.doc(r);case 5:t.sent.delete(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Error deleting card:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"cards-labels"},this.props.data.labels.map((function(e){return n.a.createElement("span",{key:e,style:{background:e},className:"label"})}))),n.a.createElement("div",{className:"card-body"},n.a.createElement(O.a,{onClick:this.toggleModal,readOnly:!0,value:this.props.data.text}),n.a.createElement("span",{onClick:this.deleteCard},"\xd7"))),n.a.createElement(j,{modalOpen:this.state.modalOpen,toggleModal:this.toggleModal,cardData:this.props.data}))}}]),a}(n.a.Component),C=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={currentCards:[]},e.fetchCards=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.where("card.listId","==",a).orderBy("card.createdAt").onSnapshot((function(t){t.docChanges().forEach((function(t){var a=t.doc,r={id:a.id,text:a.data().card.text,labels:a.data().card.labels};if("added"===t.type&&e.setState({currentCards:[].concat(Object(i.a)(e.state.currentCards),[r])}),"removed"===t.type&&e.setState({currentCards:Object(i.a)(e.state.currentCards.filter((function(e){return e.id!==t.doc.id})))}),"modified"===t.type){var n=e.state.currentCards.findIndex((function(e){return e.id===t.doc.id})),c=Object(i.a)(e.state.currentCards);c[n]=r,e.setState({currentCards:c})}}))}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("Error fetching cards",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),e.nameInput=n.a.createRef(),e.createNewCard=function(){var t=Object(d.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),!(r={text:e.nameInput.current.value,listId:e.props.list.id,labels:[],createdAt:new Date}).text||!r.listId){t.next=6;break}return t.next=6,w.add({card:r});case 6:e.nameInput.current.value="",console.log("new card added "+r.text),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("Error creating a new card: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteList=function(){var t=e.props.list.id;e.props.deleteList(t)},e.updateList=function(){var t=Object(d.a)(l.a.mark((function t(a){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.props.list.id,n=a.currentTarget.value,t.next=5,y.doc(r);case 5:t.sent.update({"list.title":n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Error updating list:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.fetchCards(this.props.list.id)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"list"},n.a.createElement("div",{className:"list-header"},n.a.createElement("input",{type:"text",name:"listTitle",onChange:this.updateList,defaultValue:this.props.list.title}),n.a.createElement("span",{onClick:this.deleteList},"\xd7")),Object.keys(this.state.currentCards).map((function(t){return n.a.createElement(x,{key:t,data:e.state.currentCards[t]})})),n.a.createElement("form",{onSubmit:this.createNewCard,className:"new-card-wrapper"},n.a.createElement("input",{type:"text",ref:this.nameInput,name:"name",placeholder:" + New Card"})))}}]),a}(n.a.Component),B=n.a.createContext(),N=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={user:{name:"Byron"}},e}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement(B.Provider,{value:{user:this.state.user}},this.props.children)}}]),a}(n.a.Component),L=B.Consumer,I=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={currentBoard:{},currentLists:[]},e.getLists=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.where("list.board","==",a).orderBy("list.createdAt").onSnapshot((function(t){t.docChanges().forEach((function(t){if("added"===t.type){var a=t.doc,r={id:a.id,title:a.data().list.title};e.setState({currentLists:[].concat(Object(i.a)(e.state.currentLists),[r])})}"removed"===t.type&&e.setState({currentLists:Object(i.a)(e.state.currentLists.filter((function(e){return e.id!==t.doc.id})))})}))}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("Error fetching lists: ",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),e.getBoard=function(){var t=Object(d.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.doc(a).get();case 3:r=t.sent,e.setState({currentBoard:r.data().board}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error getting boards ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.addBoardInput=n.a.createRef(),e.createNewList=function(){var t=Object(d.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),!(r={title:e.addBoardInput.current.value,board:e.props.match.params.boardId,createdAt:new Date}).title||!r.board){t.next=6;break}return t.next=6,y.add({list:r});case 6:e.addBoardInput.current.value="",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Error creating a new list: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteBoard=Object(d.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.match.params.boardId,e.props.deleteBoard(a);case 2:case"end":return t.stop()}}),t)}))),e.updateBoard=function(t){var a=e.props.match.params.boardId,r=t.currentTarget.value;a&&r&&e.props.updateBoard(a,r)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getBoard(this.props.match.params.boardId),this.getLists(this.props.match.params.boardId)}},{key:"render",value:function(){var e=this;return n.a.createElement(L,null,(function(t){t.user;return n.a.createElement("div",{className:"board-wrapper",style:{backgroundColor:e.state.currentBoard.background}},n.a.createElement("div",{className:"board-header"},n.a.createElement("input",{type:"text",name:"boardTitle",onChange:e.updateBoard,defaultValue:e.state.currentBoard.title}),n.a.createElement("button",{onClick:e.deleteBoard},"Delete board")),n.a.createElement("div",{className:"lists-wrapper"},Object.keys(e.state.currentLists).map((function(t){return n.a.createElement(C,{key:e.state.currentLists[t].id,list:e.state.currentLists[t],deleteList:e.props.deleteList})}))),n.a.createElement("form",{onSubmit:e.createNewList,className:"new-list-wrapper"},n.a.createElement("input",{type:"text",ref:e.addBoardInput,name:"name",placeholder:" +  New List"})))}))}}]),a}(n.a.Component),S=a(2),D=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).goToBoard=function(){var t=e.props.board.id;e.props.history.push({pathname:"/board/".concat(t)})},e}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement("ul",{className:"board-preview-item",onClick:this.goToBoard,style:{backgroundColor:this.props.board.background}},n.a.createElement("li",null,this.props.board.title))}}]),a}(n.a.Component),A=Object(S.f)(D),M=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={title:"",background:"#80ccff"},e.handleSubmit=function(t){t.preventDefault();var a={title:e.state.title,background:e.state.background,createdAt:new Date,user:"abc123"};a.title&&a.background&&e.props.createNewBoard(a)},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("form",{className:"create-board-wrapper",onSubmit:this.handleSubmit},n.a.createElement("input",{type:"type",name:"name",placeholder:"Board name",onChange:function(t){return e.setState({title:t.target.value})}}),n.a.createElement("select",{name:"background",onChange:function(t){return e.setState({background:t.target.value})}},n.a.createElement("option",{value:"#80ccff"},"Blue"),n.a.createElement("option",{value:"#80ffaa"},"Green"),n.a.createElement("option",{value:"#f94a1e"},"Red"),n.a.createElement("option",{value:"#ffb3ff"},"Pink"),n.a.createElement("option",{value:"#bf00ff"},"Purple"),n.a.createElement("option",{value:"#ffad33"},"Orange")),n.a.createElement("button",{type:"submit"},"Create new board"))}}]),a}(n.a.Component),T=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.getBoards()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("span",null,this.props.match.params.userId),n.a.createElement(M,{createNewBoard:this.props.createNewBoard}),n.a.createElement("div",{className:"board-preview-wrapper"},Object.keys(this.props.boards).map((function(t){return n.a.createElement(A,{key:t,board:e.props.boards[t]})}))))}}]),a}(n.a.Component),R=a(20),P=function(){return n.a.createElement("div",null,n.a.createElement("h3",null,"Page Not Found"))},z=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement("header",null,n.a.createElement("a",{href:"/boards"},n.a.createElement("span",{role:"img","aria-label":"house emoji"},"\ud83c\udfe0")),n.a.createElement("h1",null,"Trello Clone"))}}]),a}(n.a.Component),F=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={boards:[]},e.getBoards=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({boards:[]}),t.next=4,g.get();case 4:t.sent.forEach((function(t){var a=t.data().board,r=Object(u.a)({id:t.id},a);e.setState({boards:[].concat(Object(i.a)(e.state.boards),[r])})})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error getting boards",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.createNewBoard=function(){var t=Object(d.a)(l.a.mark((function t(a){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.add({board:a});case 3:r=t.sent,n=Object(u.a)({id:r.id},a),e.setState({boards:[].concat(Object(i.a)(e.state.boards),[n])}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error creating new board: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteList=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.where("card.listId","==",t).get();case 3:return 0!==(a=e.sent).docs.length&&a.forEach((function(e){e.ref.delete()})),e.next=7,y.doc(t);case 7:e.sent.delete(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error deleting list",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),e.deleteBoard=function(){var t=Object(d.a)(l.a.mark((function t(a){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.where("list.board","==",a).get();case 3:return 0!==(r=t.sent).docs.length&&r.forEach((function(t){e.deleteList(t.ref.id)})),t.next=7,g.doc(a);case 7:n=t.sent,e.setState({boards:Object(i.a)(e.state.boards.filter((function(e){return e.id!==a})))}),n.delete(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("Error deleting board: ",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),e.updateBoard=function(){var e=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.doc(t);case 3:e.sent.update({"board.title":a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error updating board: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(R.a,null,n.a.createElement(N,null,n.a.createElement(z,null),n.a.createElement(S.c,null,n.a.createElement(S.a,{exact:!0,path:"/trello-clone",render:function(t){return n.a.createElement(T,Object.assign({},t,{updateBoard:e.updateBoard,getBoards:e.getBoards,boards:e.state.boards,createNewBoard:e.createNewBoard}))}}),n.a.createElement(S.a,{path:"/board/:boardId",render:function(t){return n.a.createElement(I,Object.assign({},t,{updateBoard:e.updateBoard,deleteBoard:e.deleteBoard,deleteList:e.deleteList}))}}),n.a.createElement(S.a,{component:P})))))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.6b8ba5c0.chunk.js.map